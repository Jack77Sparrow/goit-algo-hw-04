from pathlib import Path
from colorama import Fore, init
import sys

init(autoreset=True)
def snake_case(path: Path, prefix = "    "):
    """
    –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤–∏–≤–æ–¥–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —Ç–∞ —Ñ–∞–π–ª—ñ–≤ —É –≤–∏–≥–ª—è–¥—ñ –¥–µ—Ä–µ–≤–∞ –∑ –∫–æ–ª—å–æ—Ä–∞–º–∏ —Ç–∞ emoji.

    –ê—Ä–≥—É–º–µ–Ω—Ç–∏:
    ----------
    path : Path
        –û–±'—î–∫—Ç Path, —â–æ –≤–∫–∞–∑—É—î –Ω–∞ –ø–æ—Ç–æ—á–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è.
    prefix : str, optional
        –°—Ç—Ä–æ–∫–∞-–ø—Ä–µ—Ñ—ñ–∫—Å, —â–æ –¥–æ–¥–∞—î—Ç—å—Å—è –ø–µ—Ä–µ–¥ –Ω–∞–∑–≤–æ—é –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
        –¥–ª—è —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—Ç—É–ø—ñ–≤ —Ç–∞ –ª—ñ–Ω—ñ–π –¥–µ—Ä–µ–≤–∞.
        –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥—ñ–ª–æ–∫ –ø—Ä–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–º—É –æ–±—Ö–æ–¥—ñ –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º "    ".
    """
    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —ñ—Å–Ω—É—î —à–ª—è—Ö
    if not path.exists():
        print(f'{Fore.RED} –ü–æ–º–∏–ª–∫–∞ : –§–∞–π–ª—É –Ω–µ —ñ—Å–Ω—É—î')
        sys.exit(1)



    # –û—Ç—Ä–∏–º—É—î–º–æ —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Ç–∞ —Å–æ—Ä—Ç—É—î–º–æ: —Å–ø–æ—á–∞—Ç–∫—É –ø–∞–ø–∫–∏, –ø–æ—Ç—ñ–º —Ñ–∞–π–ª–∏
    items = sorted(path.iterdir(), key=lambda x: (x.is_file(), x.name))
    
    # –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –∫–æ–∂–Ω–æ–º—É –µ–ª–µ–º–µ–Ω—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
    for i, item in enumerate(items):
        # –í–∏–∑–Ω–∞—á–∞—î–º–æ —Å–∏–º–≤–æ–ª –∑'—î–¥–Ω—É–≤–∞—á–∞: '‚îó' –¥–ª—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞, '‚î£' –¥–ª—è —ñ–Ω—à–∏—Ö
        connector = "‚îó" if i == len(items)-1 else '‚î£'

        # –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç ‚Äî –ø–∞–ø–∫–∞
        if item.is_dir():
            # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É –ø–∞–ø–∫–∏ —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ emoji üìÇ
            print(f'{prefix}{connector}üìÇ{Fore.BLUE}{item.name}/')
            # –§–æ—Ä–º—É—î–º–æ –Ω–æ–≤–∏–π –ø—Ä–µ—Ñ—ñ–∫—Å –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É
            # –Ø–∫—â–æ –ø–æ—Ç–æ—á–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –æ—Å—Ç–∞–Ω–Ω—ñ–π, –ª—ñ–Ω—ñ—ó –≤–Ω–∏–∑ –Ω–µ –ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ ('    '), —ñ–Ω–∞–∫—à–µ –¥–æ–¥–∞—î–º–æ '‚îÉ    '
            new_prefix = prefix + ('    ' if i == len(items)-1 else '‚îÉ    ')
            # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
            snake_case(item, new_prefix)

        # –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç ‚Äî —Ñ–∞–π–ª
        if item.is_file():
            # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É –∑–µ–ª–µ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ emoji üìú
            print(f'{prefix}{connector}üìú{Fore.GREEN}{item.name}')

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—É –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
if len(sys.argv) != 2:
    print(f'{Fore.RED} –ü–æ–º–∏–ª–∫–∞ : –Ω–µ –≤–∫–∞–∑–∞–Ω–æ —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó')


# –û—Ç—Ä–∏–º—É—î–º–æ —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
path_to_dir = sys.argv[1]
# –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —à–ª—è—Ö –Ω–∞ –æ–±'—î–∫—Ç Path —Ç–∞ –æ—Ç—Ä–∏–º—É—î–º–æ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —à–ª—è—Ö
path = Path(path_to_dir).resolve()

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —î —à–ª—è—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
if not path.is_dir():
    print(f'{Fore.RED} –ü–æ–º–∏–ª–∫–∞ : –§–∞–π–ª –Ω–µ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é')
# –í–∏–≤–æ–¥–∏–º–æ –∫–æ—Ä–µ–Ω–µ–≤—É –ø–∞–ø–∫—É —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ emoji üì¶
print(f'üì¶{Fore.RED}{path.name}/')

# –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è –≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ—Ä–µ–Ω—è
snake_case(path)
